<!--
 * 
 * Harmony Sheets®
 * 📧 support@harmonysheets.com
 * 🌐 harmonysheets.com
 * ©2021 Harmony® Codes All Rights Reserved.
 * Strictly forbidden to copy any of the code.
 * Code created for Keren Hadfusa.
 * 
-->

<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Keren Hadfusa</title>
    <link rel="icon" type="image/x-icon" href="https://i.ibb.co/0QRNGQR/Breslev-Logo-HEX-320100.png">
    <style type="text/css">
      body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
      }
      #content {
        position:absolute;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0px; 
      }
    </style>
  </head>

  <body id="body">
    <iframe src="https://script.google.com/macros/s/AKfycbyxGRoHaRO8HGl14uoiO7buEYtWotb60iL9kAfPu2nPhAuCE-0H9ift7GcNzneE6keZ/exec" id="webapp" title="Keren Hadfusa" width="100%" height="100%" frameborder="0" marginheight="0" marginwidth="0" allow="clipboard-write">Loading…</iframe>
  </body>
  
  <script>
    setInterval(checkForSoftwareUpdate, 2000);
    
    function checkForSoftwareUpdate(){
      const iframeSrc = document.getElementById('webapp').src
      fetch('https://script.google.com/macros/s/AKfycbyPOLc9npfa50W2MJXhy8VagoZVOrlF-e9Edi_w51AgiZoWr9rgEZu35qDdMySM6t-iVQ/exec')
        .then(response => response.text())
        .then(data => {
        var webappUrl = data.split(',')[0];
        var softwareUpdateSetting = data.split(',')[1];
        console.log(webappUrl);
        console.log(softwareUpdateSetting);
        console.log(webappUrl == iframeSrc);
        });
      
    }
    
    function reloadWebapp(newLink){
      console.log('reload webapp')
      document.getElementById('webapp').src = newLink;
    }
  
  </script>
</html>
